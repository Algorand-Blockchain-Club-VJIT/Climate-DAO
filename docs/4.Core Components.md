# 4. Core Components

## 4.1 AI-Powered Proposal Analysis System

The heart of AI-G-DAO is our comprehensive AI analysis system that evaluates climate proposals using Google Gemini 1.5 Flash to provide scientific, unbiased assessment of environmental projects.

### 4.1.1 Analysis Engine (`lib/gemini.ts`)

#### Core Functionality
```typescript
interface AIReviewResult {
  overallScore: number;                    // 0-100 comprehensive rating
  environmentalImpact: EnvironmentalAnalysis;
  feasibility: FeasibilityAnalysis;
  risks: RiskAnalysis;
  implementationRoadmap: ImplementationPlan;
  recommendations: string[];
  category: string;
}
```

#### Analysis Dimensions

**Environmental Impact Assessment**
- **Carbon Footprint Analysis**: Quantitative CO2 reduction potential
- **Biodiversity Impact**: Effects on local ecosystems and wildlife
- **Resource Efficiency**: Water, energy, and material usage optimization
- **Scalability Potential**: Global applicability and expansion possibilities
- **Scientific Validity**: Evidence-based impact projections

**Feasibility Analysis**
- **Technical Feasibility**: Technology readiness and implementation complexity
- **Economic Viability**: Cost-benefit analysis and financial sustainability
- **Resource Requirements**: Personnel, equipment, and infrastructure needs
- **Timeline Realism**: Project duration and milestone achievability
- **Regulatory Compliance**: Legal and regulatory considerations

**Risk Assessment**
- **Implementation Risks**: Technical, operational, and logistical challenges
- **Environmental Risks**: Potential negative environmental consequences
- **Financial Risks**: Budget overruns and funding sustainability
- **Social Risks**: Community acceptance and stakeholder alignment
- **Mitigation Strategies**: Recommended risk reduction approaches

### 4.1.2 AI Integration Hook (`hooks/use-ai-review.ts`)

#### State Management
```typescript
interface AIReviewState {
  isAnalyzing: boolean;
  result: AIReviewResult | null;
  error: string | null;
  retryCount: number;
}
```

#### Features
- **Real-time Analysis**: Instant proposal evaluation during submission
- **Error Handling**: Graceful degradation with retry mechanisms
- **Loading States**: User-friendly analysis progress indication
- **Result Caching**: Efficient re-use of analysis results

### 4.1.3 Analysis Display Component (`components/ai-review-display.tsx`)

#### Visualization Features
- **Score Visualization**: Color-coded progress bars and numerical ratings
- **Category Breakdown**: Detailed analysis across all evaluation dimensions
- **Recommendation Cards**: Actionable improvement suggestions
- **Implementation Timeline**: Visual roadmap with phases and milestones
- **Risk Matrix**: Clear presentation of identified risks and mitigations

## 4.2 Algorand Blockchain Integration

### 4.2.1 Blockchain Client (`lib/algorand.ts`)

#### Network Configuration
```typescript
export const algorandClient = algosdk.makeAlgodClient(
  'https://testnet-api.algonode.cloud',
  '',
  443
);

export const CONTRACT_IDS = {
  CLIMATE_DAO: 'your-contract-id',
  GOVERNANCE: 'governance-contract-id',
  CREDITS: 'credits-contract-id'
};
```

#### Core Functions
- **Network Connectivity**: Reliable connection to Algorand TestNet
- **Transaction Management**: Streamlined transaction creation and submission
- **Contract Interaction**: Simplified smart contract communication
- **Account Management**: Wallet integration and account utilities

### 4.2.2 Smart Contract System

#### Climate DAO Contract (`smart_contracts/climate_dao/`)
```python
# Core contract functionality
class ClimateDAOContract:
    def propose_project(self, proposer: Account, proposal_data: bytes) -> None:
        # Submit new climate project proposal
        
    def vote_on_proposal(self, voter: Account, proposal_id: int, vote: bool) -> None:
        # Cast vote on active proposal
        
    def execute_proposal(self, proposal_id: int) -> None:
        # Execute approved proposal
        
    def distribute_credits(self, recipient: Account, amount: int) -> None:
        # Distribute Climate Impact Credits
```

#### Contract Features
- **Proposal Management**: Create, store, and manage climate project proposals
- **Democratic Voting**: Transparent voting system with weighted participation
- **Automatic Execution**: Smart contract automation for approved proposals
- **Credit Distribution**: Algorithmic allocation of Climate Impact Credits

### 4.2.3 Wallet Integration (`hooks/use-wallet.tsx`)

#### Wallet Management
```typescript
interface WalletState {
  isConnected: boolean;
  accounts: string[];
  activeAccount: string | null;
  provider: BaseWalletProvider | null;
}
```

#### Supported Wallets
- **Pera Wallet**: Primary Algorand wallet integration
- **Defly Wallet**: Alternative wallet provider support
- **WalletConnect**: Cross-platform wallet connectivity
- **MyAlgo**: Desktop wallet integration

## 4.3 Climate Impact Credits (CIC) System

### 4.3.1 Credit Token Properties

#### Token Characteristics
- **Symbol**: CIC (Climate Impact Credits)
- **Network**: Algorand (carbon-negative blockchain)
- **Supply**: Dynamic based on verified environmental impact
- **Decimals**: 6 (Algorand standard)
- **Transferability**: Fully transferable and tradeable

#### Earning Mechanisms
- **Project Completion**: Credits awarded for successful climate project implementation
- **Governance Participation**: Rewards for active DAO participation
- **Impact Verification**: Bonus credits for verified environmental outcomes
- **Community Contributions**: Credits for platform development and maintenance

### 4.3.2 Credit Calculation Algorithm

#### Impact Measurement
```typescript
interface ImpactMetrics {
  carbonReduction: number;        // CO2 equivalent reduction (tons)
  biodiversityScore: number;      // Ecosystem impact rating (0-100)
  resourceEfficiency: number;     // Resource optimization percentage
  scalabilityFactor: number;      // Global applicability multiplier
  verificationLevel: number;      // Third-party validation score
}
```

#### Credit Formula
```
CIC_Amount = (Carbon_Reduction × 10) + 
            (Biodiversity_Score × 0.5) + 
            (Resource_Efficiency × 0.3) + 
            (Scalability_Factor × Carbon_Reduction × 0.2) + 
            (Verification_Bonus)
```

## 4.4 Governance System

### 4.4.1 DAO Governance Hook (`hooks/use-climate-dao.ts`)

#### Governance Functions
```typescript
interface GovernanceActions {
  submitProposal: (proposal: ProposalData) => Promise<string>;
  voteOnProposal: (proposalId: string, vote: boolean) => Promise<void>;
  getActiveProposals: () => Promise<Proposal[]>;
  getProposalDetails: (id: string) => Promise<ProposalDetails>;
}
```

#### Voting System
- **Weighted Voting**: Vote power based on CIC holdings and contribution history
- **Transparent Process**: All votes recorded on-chain for complete auditability
- **Quorum Requirements**: Minimum participation thresholds for valid decisions
- **Time-bounded Voting**: Fixed voting periods for efficient decision-making

### 4.4.2 Proposal Lifecycle

#### Proposal States
1. **Draft**: Initial proposal creation and AI analysis
2. **Under Review**: Community review period with AI insights available
3. **Active Voting**: Democratic voting period
4. **Approved/Rejected**: Final community decision
5. **Implementation**: Execution of approved proposals
6. **Completed**: Project completion and impact verification

#### Transition Triggers
- **Automatic Progression**: Time-based state transitions
- **Community Triggers**: Vote-based state changes
- **Admin Actions**: Emergency governance interventions
- **Smart Contract Automation**: Algorithmic proposal management

## 4.5 User Interface Components

### 4.5.1 Core UI Components (`components/ui/`)

#### Design System
- **Color Scheme**: Yellow/amber primary with dark mode support
- **Typography**: Inter font family with responsive scaling
- **Spacing**: Tailwind CSS spacing scale (4px base unit)
- **Accessibility**: WCAG 2.1 AA compliance through Radix UI
- **Animations**: Subtle micro-interactions and loading states

#### Key Components
- **StarBorder**: Animated glassmorphic button with moving gradients
- **Cards**: Elevated surfaces for content organization
- **Forms**: Accessible form controls with validation
- **Charts**: Data visualization for analytics and metrics
- **Modals**: Overlay interfaces for focused interactions

### 4.5.2 Page Components

#### Landing Page (`components/landing-page.tsx`)
- **Hero Section**: Compelling introduction with animated CTA
- **Feature Overview**: Key platform capabilities
- **Process Flow**: Step-by-step user journey
- **Call-to-Action**: StarBorder animated "Join the DAO" button

#### Dashboard (`components/dashboard-page.tsx`)
- **Wallet Status**: Connection state and account information
- **Proposal Summary**: Recent proposals and voting opportunities
- **Impact Metrics**: Personal and community environmental impact
- **Quick Actions**: Fast access to core platform functions

#### Proposal Submission (`components/submit-proposal.tsx`)
- **Multi-step Form**: Guided proposal creation process
- **AI Analysis Integration**: Real-time analysis feedback
- **Validation System**: Comprehensive input validation
- **Preview Mode**: Review before final submission

## 4.6 Integration Architecture

### 4.6.1 External Service Integration

#### Google Gemini API
- **Authentication**: Secure API key management
- **Request Optimization**: Efficient prompt engineering
- **Response Validation**: Structured output verification
- **Error Handling**: Graceful degradation and retry logic

#### Algorand Network
- **Node Selection**: Reliable Algorand node connectivity
- **Transaction Monitoring**: Real-time transaction status tracking
- **Network Switching**: Easy TestNet/MainNet configuration
- **Fee Management**: Predictable transaction cost handling

### 4.6.2 Internal Component Communication

#### State Management Patterns
- **Context Providers**: Global state for wallet and DAO connections
- **Custom Hooks**: Reusable logic for common operations
- **Event Handling**: Consistent patterns for user interactions
- **Error Boundaries**: Graceful error handling and recovery

This comprehensive component architecture ensures a robust, scalable, and user-friendly platform that effectively combines AI analysis with blockchain governance to drive meaningful climate action.